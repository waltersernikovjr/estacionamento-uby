# ü§ñ AI Context & Workflow

## üìö LEITURA OBRIGAT√ìRIA ANTES DE QUALQUER ATIVIDADE

Sempre que iniciar uma nova tarefa, **LEIA PRIMEIRO** os seguintes arquivos na ordem:

1. **`.ai-guidelines.md`** - Regras de c√≥digo limpo (sem coment√°rios redundantes)
2. **`.github/copilot-instructions.md`** - Padr√µes de arquitetura, SOLID, Clean Architecture
3. **`DEVELOPMENT.md`** - Workflow de desenvolvimento, Swagger, Git
4. **`CHECKLIST.md`** - Status das funcionalidades implementadas
5. **`PROGRESSO.md`** - Progresso atual e pr√≥ximas tarefas
6. **`docs/architecture/backend-structure.md`** - Estrutura de camadas
7. **`docs/database/schema.md`** - Modelagem do banco de dados

## ‚ö†Ô∏è REGRAS CR√çTICAS

### C√≥digo Limpo
- ‚ùå **NUNCA** adicionar coment√°rios inline √≥bvios (`// Create user`, `// Arrange`, etc)
- ‚úÖ **SEMPRE** usar PHPDoc completo em m√©todos p√∫blicos
- ‚úÖ **SEMPRE** usar nomes descritivos e auto-explicativos
- ‚úÖ **SEMPRE** preferir refatora√ß√£o a coment√°rios

### Arquitetura
- ‚úÖ **SEMPRE** seguir Clean Architecture (Domain ‚Üí Application ‚Üí Infrastructure ‚Üí Presentation)
- ‚úÖ **SEMPRE** aplicar SOLID Principles
- ‚úÖ **SEMPRE** usar Repository Pattern
- ‚úÖ **SEMPRE** usar DTOs para transfer√™ncia de dados
- ‚úÖ **SEMPRE** usar Type Hints estritos (`declare(strict_types=1);`)
- ‚úÖ **SEMPRE** usar `final` em classes que n√£o precisam ser estendidas
- ‚úÖ **SEMPRE** usar `readonly` para imutabilidade

### Git Workflow
- ‚úÖ **SEMPRE** commits em ingl√™s
- ‚úÖ **SEMPRE** seguir padr√£o sem√¢ntico: `feat(module): description`
- ‚úÖ **SEMPRE** commits at√¥micos e descritivos
- ‚ùå **NUNCA** modificar README.md (documento do desafio)
- ‚ùå **NUNCA** modificar SETUP.md (documento original)

### Documenta√ß√£o
- ‚úÖ **SEMPRE** atualizar Swagger em `ApiDocumentation.php`
- ‚úÖ **SEMPRE** regenerar docs: `php artisan l5-swagger:generate`
- ‚úÖ **SEMPRE** documentar em `docs/` (n√£o no README principal)
- ‚úÖ **SEMPRE** atualizar `docs/API.md` com novos endpoints

### Testes
- ‚úÖ **SEMPRE** escrever testes unit√°rios para Services
- ‚úÖ **SEMPRE** escrever testes de integra√ß√£o para Controllers
- ‚úÖ **SEMPRE** nomear: `test_should_[behavior]_when_[condition]`
- ‚ùå **NUNCA** usar coment√°rios AAA (Arrange/Act/Assert)
- ‚úÖ **SEMPRE** rodar testes antes de commit: `php artisan test`

### Qualidade de C√≥digo
- ‚úÖ **SEMPRE** seguir PSR-12
- ‚úÖ **SEMPRE** usar Dependency Injection via construtor
- ‚úÖ **SEMPRE** validar inputs (Form Requests)
- ‚úÖ **SEMPRE** usar API Resources para outputs
- ‚ùå **NUNCA** deixar `dd()`, `var_dump()`, `console.log()`
- ‚ùå **NUNCA** l√≥gica de neg√≥cio em Controllers
- ‚ùå **NUNCA** queries diretas em Controllers (usar Repositories)

## üéØ Checklist Pr√©-Commit

Antes de fazer qualquer commit:

- [ ] Li todos os arquivos `.md` de contexto
- [ ] C√≥digo segue `.ai-guidelines.md` (sem coment√°rios desnecess√°rios)
- [ ] C√≥digo segue `.github/copilot-instructions.md` (Clean Architecture, SOLID)
- [ ] PHPDoc completo em m√©todos p√∫blicos
- [ ] Type hints estritos em tudo
- [ ] Testes escritos e passando
- [ ] Swagger atualizado e regenerado
- [ ] Sem debug code (dd, var_dump, etc)
- [ ] Commits sem√¢nticos em ingl√™s
- [ ] Documenta√ß√£o atualizada em `docs/`

## üì¶ Estrutura de Camadas (Resumo)

```
Domain/                # Contratos, Exce√ß√µes (interfaces puras)
  ‚îú‚îÄ‚îÄ Contracts/       # RepositoryInterface, ServiceInterface
  ‚îî‚îÄ‚îÄ Exceptions/      # Domain-specific exceptions

Application/           # Casos de uso, l√≥gica de neg√≥cio
  ‚îú‚îÄ‚îÄ DTOs/            # Data Transfer Objects
  ‚îî‚îÄ‚îÄ Services/        # Business logic (independente de framework)

Infrastructure/        # Implementa√ß√µes concretas
  ‚îú‚îÄ‚îÄ Persistence/     # Eloquent Models
  ‚îú‚îÄ‚îÄ Repositories/    # Repository implementations
  ‚îú‚îÄ‚îÄ External/        # APIs externas (ViaCEP, etc)
  ‚îî‚îÄ‚îÄ Mail/            # Mailables

Presentation/          # Controllers, Requests, Resources
  ‚îú‚îÄ‚îÄ Http/
  ‚îÇ   ‚îú‚îÄ‚îÄ Controllers/ # API Controllers (finos, delegam para Services)
  ‚îÇ   ‚îú‚îÄ‚îÄ Requests/    # Form Requests (valida√ß√£o)
  ‚îÇ   ‚îî‚îÄ‚îÄ Resources/   # API Resources (transforma√ß√£o)
```

## üöÄ Workflow de Desenvolvimento

1. **Planejar:** Ler contexto completo nos arquivos `.md`
2. **Implementar:** Seguir camadas (Domain ‚Üí Application ‚Üí Infrastructure ‚Üí Presentation)
3. **Testar:** Escrever testes unit√°rios e de integra√ß√£o
4. **Documentar:** Atualizar Swagger e `docs/API.md`
5. **Validar:** Rodar testes, verificar Swagger UI
6. **Commitar:** Mensagem sem√¢ntica em ingl√™s
7. **Revisar:** Checklist de qualidade

## üí° Filosofia do Projeto

> **"Clean code doesn't need comments. Comments are apologies for bad code."**

- C√≥digo auto-explicativo > Coment√°rios
- Nomes descritivos > Abrevia√ß√µes
- Refatora√ß√£o > Coment√°rios explicativos
- Testes > Documenta√ß√£o extensa
- SOLID > Heran√ßa complexa
- Composi√ß√£o > Heran√ßa
- Imutabilidade > Estado mut√°vel

---

**Este arquivo serve como checklist obrigat√≥rio para toda e qualquer atividade de c√≥digo.**
